<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Your Order • BIGGS Apparel Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Nunito:wght@300;400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #F8F3ED;
      --primary: #F4A261;
      --primary-dark: #E76F51;
      --ink: #264653;
      --card-bg: #FFFFFF;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Nunito", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--ink);
    }
    header {
      padding: 1rem 1.25rem 0.25rem;
    }
    .title {
      font-family: "Poppins", sans-serif;
      font-size: 1.35rem;
    }
    main {
      padding: 0.25rem 1.25rem 5rem;
      max-width: 1100px;
      margin: 0 auto;
    }
    .section {
      margin-bottom: 1rem;
      background: var(--card-bg);
      border-radius: 1rem;
      padding: 0.9rem 1rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    .section h2 {
      margin: 0 0 0.25rem;
      font-family: "Poppins", sans-serif;
      font-size: 1rem;
    }
    .section p {
      margin: 0 0 0.75rem;
      font-size: 0.85rem;
      opacity: 0.85;
    }
    label {
      font-size: 0.85rem;
      display: block;
      margin-bottom: 0.25rem;
    }
    select, input[type="text"], input[type="number"], input[type="file"], input[type="email"], input[type="tel"] {
      width: 100%;
      padding: 0.6rem;
      border-radius: 0.6rem;
      border: 1px solid rgba(0,0,0,0.15);
      font-size: 0.9rem;
      margin-bottom: 0.6rem;
    }
    .inline-row {
      display: flex;
      gap: 0.6rem;
    }
    .inline-row > div { flex: 1; }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }
    .pill {
      padding: 0.4rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.2);
      font-size: 0.8rem;
      cursor: pointer;
      background: #F9FAFB;
    }
    .pill input { display: none; }
    .pill.active {
      background: var(--ink);
      color: #fff;
      border-color: var(--ink);
    }

    .btn-main {
      width: 100%;
      padding: 0.8rem;
      border-radius: 999px;
      border: none;
      background: var(--ink);
      color: #fff;
      font-weight: 600;
      margin-top: 0.25rem;
      font-size: 0.95rem;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.2);
    }

    .order-items {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .order-item-card {
      padding: 0.6rem 0.7rem;
      border-radius: 0.8rem;
      background: #F3F4F6;
      font-size: 0.8rem;
    }

    .preview-card {
      border-radius: 1rem;
      background: linear-gradient(135deg, #FFE5D4, #F0FAFF);
      padding: 0.9rem 1rem;
      display: flex;
      flex-direction: row;
      gap: 0.7rem;
      align-items: center;
    }

    .preview-shirt {
      width: 80px;
      height: 100px;
      border-radius: 0.6rem;
      background: #FFFFFF;
      border: 2px dashed rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      text-align: center;
      padding: 0.25rem;
    }

    .preview-details {
      font-size: 0.85rem;
    }

    .sticky-cart {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--ink);
      color: #fff;
      padding: 0.6rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
    }
    .sticky-cart button {
      background: #fff;
      color: var(--ink);
      border-radius: 999px;
      border: none;
      padding: 0.45rem 0.9rem;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
    }

    @media (min-width: 900px) {
      .two-col {
        display: grid;
        grid-template-columns: 3fr 2fr;
        gap: 1rem;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="title">Build Your Order</div>
    <div style="font-size:0.85rem; opacity:0.8;">
      Add as many different items as you need — designs, styles, colors, and placements can all be mixed.
    </div>
  </header>

  <main>
    <form id="order-form">
      <div class="two-col">
        <div>
          <!-- Section 1: Group / Design -->
          <section class="section">
            <h2>1. Group & Design</h2>
            <p>Select an existing organization or choose “New Custom Organization”.</p>

            <label for="client">Organization</label>
            <select id="client" name="client">
              <option value="">New Custom Organization</option>
              {% for client in clients %}
              <option value="{{ client.slug }}" {% if selected_client == client.slug %}selected{% endif %}>
                {{ client.name }}
              </option>
              {% endfor %}
            </select>

            <label>Choose a design</label>
            <input type="text" id="design-name" placeholder="Design name / number (or describe it)" />

            <label>Upload artwork (optional for new groups)</label>
            <input type="file" id="design-file" accept="image/*" />
          </section>

          <!-- Section 2: Item details -->
          <section class="section">
            <h2>2. Item Details</h2>
            <p>Choose your Bella+Canvas style, color, size, placements and quantity.</p>

            <label for="style">Apparel style</label>
            <select id="style" name="style">
              {% for style in bella_styles %}
              <option value="{{ style.code }}">{{ style.name }}</option>
              {% endfor %}
              <option value="other-brand">Other recommended brand</option>
            </select>

            <div class="inline-row">
              <div>
                <label for="color">Color</label>
                <input type="text" id="color" placeholder="e.g. Black, Storm, Soft Cream" />
              </div>
              <div>
                <label for="size">Size</label>
                <input type="text" id="size" placeholder="e.g. YL, S, M, L, XL" />
              </div>
            </div>

            <label>Placement(s)</label>
            <div class="pill-row" id="placement-pills">
              {% for p in placements %}
              <label class="pill">
                <input type="checkbox" value="{{ p }}">
                {{ p }}
              </label>
              {% endfor %}
            </div>

            <label for="quantity">Quantity</label>
            <input type="number" id="quantity" min="1" value="1" />

            <button type="button" class="btn-main" id="add-item-btn">Add this item to order</button>
          </section>

          <!-- Section 3: Customer + Shipping + Payment -->
          <section class="section">
            <h2>3. Customer & Checkout Details</h2>

            <label for="customer-name">Your name</label>
            <input type="text" id="customer-name" required />

            <label for="customer-email">Email</label>
            <input type="email" id="customer-email" required />

            <label for="customer-phone">Phone</label>
            <input type="tel" id="customer-phone" />

            <label>Shipping or pickup</label>
            <div class="pill-row">
              <label class="pill">
                <input type="radio" name="shipping" value="pickup" checked>
                Local pickup
              </label>
              <label class="pill">
                <input type="radio" name="shipping" value="shipping">
                Ship to me (flat rate)
              </label>
            </div>

            <label>Payment method</label>
            <div class="pill-row">
              <label class="pill"><input type="radio" name="payment" value="card" checked> Credit / Debit Card</label>
              <label class="pill"><input type="radio" name="payment" value="paypal"> PayPal</label>
              <label class="pill"><input type="radio" name="payment" value="venmo"> Venmo</label>
              <label class="pill"><input type="radio" name="payment" value="applepay"> Apple Pay</label>
              <label class="pill"><input type="radio" name="payment" value="cashapp"> Cash App</label>
              <label class="pill"><input type="radio" name="payment" value="cash"> Cash (contact me)</label>
            </div>

            <label for="notes">Notes for Kayleigh</label>
            <input type="text" id="notes" placeholder="Anything I should know about this order?" />
          </section>
        </div>

        <!-- Right column: live preview + order items -->
        <div>
          <section class="section">
            <h2>Live Preview</h2>
            <p>This is a simple visual summary of what you’re building.</p>
            <div class="preview-card" id="preview-card">
              <div class="preview-shirt" id="preview-shirt">
                Shirt<br>preview
              </div>
              <div class="preview-details">
                <div id="preview-design"><strong>Design:</strong> –</div>
                <div id="preview-style"><strong>Style:</strong> –</div>
                <div id="preview-color"><strong>Color:</strong> –</div>
                <div id="preview-placements"><strong>Placement:</strong> –</div>
                <div id="preview-qty"><strong>Qty:</strong> 1</div>
              </div>
            </div>
          </section>

          <section class="section">
            <h2>Items in This Order</h2>
            <p>Add multiple different pieces (different colors, sizes, placements) before you submit.</p>
            <div class="order-items" id="order-items">
              <div style="font-size:0.8rem; opacity:0.7;">No items yet – add your first item above.</div>
            </div>
          </section>

          <button type="submit" class="btn-main">Submit Order Summary to Kayleigh</button>
          <p style="font-size:0.75rem; margin-top:0.4rem; opacity:0.75;">
            (You won’t be charged automatically yet. I’ll review your order, confirm details & send a payment link.)
          </p>
        </div>
      </div>
    </form>
  </main>

  <div class="sticky-cart" id="sticky-cart">
    <div><span id="cart-count">0</span> items in order</div>
    <button type="button" onclick="window.scrollTo({ top: 0, behavior: 'smooth' });">Review & Submit</button>
  </div>

  <script>
    const placementsContainer = document.getElementById("placement-pills");
    const placementsInputs = placementsContainer.querySelectorAll("input[type=checkbox]");
    const addItemBtn = document.getElementById("add-item-btn");
    const orderItemsEl = document.getElementById("order-items");
    const cartCountEl = document.getElementById("cart-count");

    const preview = {
      design: document.getElementById("preview-design"),
      style: document.getElementById("preview-style"),
      color: document.getElementById("preview-color"),
      placements: document.getElementById("preview-placements"),
      qty: document.getElementById("preview-qty"),
    };

    function getCurrentSelections() {
      const designName = document.getElementById("design-name").value || "Custom / Existing Design";
      const style = document.getElementById("style").selectedOptions[0].textContent;
      const color = document.getElementById("color").value || "TBD";
      const size = document.getElementById("size").value || "TBD";
      const qty = document.getElementById("quantity").value || "1";

      const placements = Array.from(placementsInputs)
        .filter(i => i.checked)
        .map(i => i.value);

      return { designName, style, color, size, qty, placements };
    }

    function updatePreview() {
      const s = getCurrentSelections();
      preview.design.innerHTML = "<strong>Design:</strong> " + s.designName;
      preview.style.innerHTML = "<strong>Style:</strong> " + s.style;
      preview.color.innerHTML = "<strong>Color:</strong> " + s.color + " • Size " + s.size;
      preview.placements.innerHTML = "<strong>Placement:</strong> " + (s.placements.length ? s.placements.join(", ") : "TBD");
      preview.qty.innerHTML = "<strong>Qty:</strong> " + s.qty;
    }

    document.getElementById("style").addEventListener("change", updatePreview);
    document.getElementById("color").addEventListener("input", updatePreview);
    document.getElementById("size").addEventListener("input", updatePreview);
    document.getElementById("quantity").addEventListener("input", updatePreview);
    document.getElementById("design-name").addEventListener("input", updatePreview);
    placementsInputs.forEach(p => {
      p.addEventListener("change", (e) => {
        e.target.closest(".pill").classList.toggle("active", e.target.checked);
        updatePreview();
      });
    });

    addItemBtn.addEventListener("click", () => {
      const s = getCurrentSelections();
      const itemDiv = document.createElement("div");
      itemDiv.className = "order-item-card";
      itemDiv.innerHTML = `
        <strong>${s.style}</strong> • ${s.color} • Size ${s.size}<br>
        Design: ${s.designName}<br>
        Placement: ${s.placements.length ? s.placements.join(", ") : "TBD"}<br>
        Qty: ${s.qty}
      `;
      if (orderItemsEl.children.length && orderItemsEl.firstElementChild.tagName === "DIV" && orderItemsEl.firstElementChild.style.opacity) {
        orderItemsEl.innerHTML = "";
      }
      orderItemsEl.appendChild(itemDiv);

      cartCountEl.textContent = orderItemsEl.children.length;
    });

    // Initialize preview
    updatePreview();
  </script>
</body>
</html>
